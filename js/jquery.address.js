(function(a){var b="click";if((/iPhone|iPod|iPad|Android|BlackBerry/).test(navigator.userAgent)){b="touchstart"}a.address=(function(){var e=function(am){var an=a.extend(a.Event(am),(function(){var ar={},aq=a.address.parameterNames();for(var ap=0,ao=aq.length;ap<ao;ap++){ar[aq[ap]]=a.address.parameter(aq[ap])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:aq,parameters:ar,queryString:a.address.queryString()}}).call(a.address));a(a.address).trigger(an);return an},k=function(am){return Array.prototype.slice.call(am)},K=function(ao,an,am){a().on.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},W=function(an,am){a().off.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},P=function(){return(af.pushState&&E.state!==L)},J=function(){return("/"+ab.pathname.replace(new RegExp(E.state),"")+ab.search+(X()?"#"+X():"")).replace(R,"/")},X=function(){var am=ab.href.indexOf("#");return am!=-1?F(ab.href.substr(am+1),ag):""},A=function(){return P()?J():X()},c=function(){try{return top.document!==L&&top.document.title!==L?top:window}catch(am){return window}},l=function(){return"javascript"},ak=function(am){am=am.toString();return(E.strict&&am.substr(0,1)!="/"?"/":"")+am},F=function(am,an){if(E.crawlable&&an){return(am!==""?"!":"")+am}return am.replace(/^\!/,"")},V=function(am,an){return parseInt(am.css(an),10)},ae=function(){if(!t){var an=A(),am=decodeURI(Z)!=decodeURI(an);if(am){if(i&&q<7){ab.reload()}else{if(i&&!Q&&E.history){n(G,50)}_old=Z;Z=an;ac(ag)}}}},ac=function(am){var ao=e(I),an=e(am?h:aj);n(x,10);if(ao.isDefaultPrevented()||an.isDefaultPrevented()){S()}},S=function(){Z=_old;if(P()){af.popState({},"",E.state.replace(/\/$/,"")+(Z===""?"/":Z))}else{t=D;if(s){if(E.history){ab.hash="#"+F(Z,D)}else{ab.replace("#"+F(Z,D))}}else{if(Z!=A()){if(E.history){ab.hash="#"+F(Z,D)}else{ab.replace("#"+F(Z,D))}}}if((i&&!Q)&&E.history){n(G,50)}if(s){n(function(){t=ag},1)}else{t=ag}}},x=function(){if(E.tracker!=="null"&&E.tracker!==H){var am=a.isFunction(E.tracker)?E.tracker:T[E.tracker],an=(ab.pathname+ab.search+(a.address&&!P()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(a.isFunction(am)){am(an)}else{if(a.isFunction(T.urchinTracker)){T.urchinTracker(an)}else{if(T.pageTracker!==L&&a.isFunction(T.pageTracker._trackPageview)){T.pageTracker._trackPageview(an)}else{if(T._gaq!==L&&a.isFunction(T._gaq.push)){T._gaq.push(["_trackPageview",decodeURI(an)])}}}}}},G=function(){var am=l()+":"+ag+";document.open();document.writeln('<html><head><title>"+ai.title.replace(/\'/g,"\\'")+"</title><script>var "+z+' = "'+encodeURIComponent(A()).replace(/\'/g,"\\'")+(ai.domain!=ab.hostname?'";document.domain="'+ai.domain:"")+"\";<\/script></head></html>');document.close();";if(q<7){f.src=am}else{f.contentWindow.location.replace(am)}},ah=function(){if(j&&d!=-1){var am,ao,an=j.substr(d+1).split("&");for(am=0;am<an.length;am++){ao=an[am].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(ao[0])){E[ao[0]]=(isNaN(ao[1])?/^(true|yes)$/i.test(ao[1]):(parseInt(ao[1],10)!==0))}if(/^(state|tracker)$/.test(ao[0])){E[ao[0]]=ao[1]}}j=H}_old=Z;Z=A()},U=function(){if(!aa){aa=D;ah();var ao=function(){w.call(this);r.call(this)},an=a("body").ajaxComplete(ao);ao();if(E.wrap){var ap=a("body > *").wrapAll('<div style="padding:'+(V(an,"marginTop")+V(an,"paddingTop"))+"px "+(V(an,"marginRight")+V(an,"paddingRight"))+"px "+(V(an,"marginBottom")+V(an,"paddingBottom"))+"px "+(V(an,"marginLeft")+V(an,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+z+'" style="height:100%;overflow:auto;position:relative;'+(s&&!window.statusbar.visible?"resize:both;":"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});if(s){a('<style type="text/css" />').appendTo("head").text("#"+z+"::-webkit-resizer { background-color: #fff; }")}}if(i&&!Q){var am=ai.getElementsByTagName("frameset")[0];f=ai.createElement((am?"":"i")+"frame");f.src=l()+":"+ag;if(am){am.insertAdjacentElement("beforeEnd",f);am[am.cols?"cols":"rows"]+=",0";f.noResize=D;f.frameBorder=f.frameSpacing=0}else{f.style.display="none";f.style.width=f.style.height=0;f.tabIndex=-1;ai.body.insertAdjacentElement("afterBegin",f)}n(function(){a(f).on("load",function(){var aq=f.contentWindow;_old=Z;Z=aq[z]!==L?aq[z]:"";if(Z!=A()){ac(ag);ab.hash=F(Z,D)}});if(f.contentWindow[z]===L){G()}},50)}n(function(){e("init");ac(ag)},1);if(!P()){if((i&&q>7)||(!i&&Q)){if(T.addEventListener){T.addEventListener(Y,ae,ag)}else{if(T.attachEvent){T.attachEvent("on"+Y,ae)}}}else{u(ae,50)}}if("state" in window.history){a(window).trigger("popstate")}}},w=function(){var ap,at=a("a"),aq=at.size(),an=1,am=-1,ar='[rel*="address:"]',ao=function(){if(++am!=aq){ap=a(at.get(am));if(ap.is(ar)){ap.address(ar)}n(ao,an)}};n(ao,an)},p=function(){if(decodeURI(Z)!=decodeURI(A())){_old=Z;Z=A();ac(ag)}},o=function(){if(T.removeEventListener){T.removeEventListener(Y,ae,ag)}else{if(T.detachEvent){T.detachEvent("on"+Y,ae)}}},r=function(){if(E.crawlable){var an=ab.pathname.replace(/\/$/,""),am="_escaped_fragment_";if(a("body").html().indexOf(am)!=-1){a('a[href]:not([href^=http]), a[href*="'+document.domain+'"]').each(function(){var ao=a(this).attr("href").replace(/^http:/,"").replace(new RegExp(an+"/?$"),"");if(ao===""||ao.indexOf(am)!=-1){a(this).attr("href","#"+encodeURI(decodeURIComponent(ao.replace(new RegExp("/(.*)\\?"+am+"=(.*)$"),"!$2"))))}})}}},L,H=null,z="jQueryAddress",ad="string",Y="hashchange",m="init",I="change",h="internalChange",aj="externalChange",D=true,ag=false,E={autoUpdate:D,crawlable:ag,history:D,strict:D,wrap:ag},C=a.browser,q=parseFloat(C.version),i=!a.support.opacity,s=C.webkit||C.safari,T=c(),ai=T.document,af=T.history,ab=T.location,u=setInterval,n=setTimeout,R=/\/{2,9}/g,al=navigator.userAgent,Q="on"+Y in T,f,N,j=a("script:last").attr("src"),d=j?j.indexOf("?"):-1,M=ai.title,t=ag,aa=ag,O=D,y=ag,B={},Z=A();_old=Z;if(i){q=parseFloat(al.substr(al.indexOf("MSIE")+4));if(ai.documentMode&&ai.documentMode!=q){q=ai.documentMode!=8?7:8}var v=ai.onpropertychange;ai.onpropertychange=function(){if(v){v.call(ai)}if(ai.title!=M&&ai.title.indexOf("#"+A())!=-1){ai.title=M}}}if(af.navigationMode){af.navigationMode="compatible"}if(document.readyState=="complete"){var g=setInterval(function(){if(a.address){U();clearInterval(g)}},50)}else{ah();a(U)}a(window).on("popstate",p).on("unload",o);return{on:function(an,ao,am){return K.apply(this,k(arguments))},off:function(an,am){return W.apply(this,k(arguments))},init:function(an,am){return K.apply(this,[m].concat(k(arguments)))},change:function(an,am){return K.apply(this,[I].concat(k(arguments)))},internalChange:function(an,am){return K.apply(this,[h].concat(k(arguments)))},externalChange:function(an,am){return K.apply(this,[aj].concat(k(arguments)))},baseURL:function(){var am=ab.href;if(am.indexOf("#")!=-1){am=am.substr(0,am.indexOf("#"))}if(/\/$/.test(am)){am=am.substr(0,am.length-1)}return am},autoUpdate:function(am){if(am!==L){E.autoUpdate=am;return this}return E.autoUpdate},crawlable:function(am){if(am!==L){E.crawlable=am;return this}return E.crawlable},history:function(am){if(am!==L){E.history=am;return this}return E.history},state:function(am){if(am!==L){E.state=am;var an=J();if(E.state!==L){if(af.pushState){if(an.substr(0,3)=="/#/"){ab.replace(E.state.replace(/^\/$/,"")+an.substr(2))}}else{if(an!="/"&&an.replace(/^\/#/,"")!=X()){n(function(){ab.replace(E.state.replace(/^\/$/,"")+"/#"+an)},1)}}}return this}return E.state},strict:function(am){if(am!==L){E.strict=am;return this}return E.strict},tracker:function(am){if(am!==L){E.tracker=am;return this}return E.tracker},wrap:function(am){if(am!==L){E.wrap=am;return this}return E.wrap},update:function(){y=D;this.value(Z);y=ag;return this},title:function(am){if(am!==L){n(function(){M=ai.title=am;if(O&&f&&f.contentWindow&&f.contentWindow.document){f.contentWindow.document.title=am;O=ag}},50);return this}return ai.title},value:function(am){if(am!==L){am=ak(am);if(am=="/"){am=""}if(Z==am&&!y){return}_old=Z;Z=am;if(E.autoUpdate||y){ac(D);if(P()){af[E.history?"pushState":"replaceState"]({},"",E.state.replace(/\/$/,"")+(Z===""?"/":Z))}else{t=D;if(s){if(E.history){ab.hash="#"+F(Z,D)}else{ab.replace("#"+F(Z,D))}}else{if(Z!=A()){if(E.history){ab.hash="#"+F(Z,D)}else{ab.replace("#"+F(Z,D))}}}if((i&&!Q)&&E.history){n(G,50)}if(s){n(function(){t=ag},1)}else{t=ag}}}return this}return ak(Z)},path:function(an){if(an!==L){var am=this.queryString(),ao=this.hash();this.value(an+(am?"?"+am:"")+(ao?"#"+ao:""));return this}return ak(Z).split("#")[0].split("?")[0]},pathNames:function(){var an=this.path(),am=an.replace(R,"/").split("/");if(an.substr(0,1)=="/"||an.length===0){am.splice(0,1)}if(an.substr(an.length-1,1)=="/"){am.splice(am.length-1,1)}return am},queryString:function(an){if(an!==L){var ao=this.hash();this.value(this.path()+(an?"?"+an:"")+(ao?"#"+ao:""));return this}var am=Z.split("?");return am.slice(1,am.length).join("?").split("#")[0]},parameter:function(an,aw,ap){var au,ar;if(aw!==L){var av=this.parameterNames();ar=[];aw=aw===L||aw===H?"":aw.toString();for(au=0;au<av.length;au++){var aq=av[au],ax=this.parameter(aq);if(typeof ax==ad){ax=[ax]}if(aq==an){ax=(aw===H||aw==="")?[]:(ap?ax.concat([aw]):[aw])}for(var at=0;at<ax.length;at++){ar.push(aq+"="+ax[at])}}if(a.inArray(an,av)==-1&&aw!==H&&aw!==""){ar.push(an+"="+aw)}this.queryString(ar.join("&"));return this}aw=this.queryString();if(aw){var am=[];ar=aw.split("&");for(au=0;au<ar.length;au++){var ao=ar[au].split("=");if(ao[0]==an){am.push(ao.slice(1).join("="))}}if(am.length!==0){return am.length!=1?am:am[0]}}},parameterNames:function(){var am=this.queryString(),ap=[];if(am&&am.indexOf("=")!=-1){var aq=am.split("&");for(var ao=0;ao<aq.length;ao++){var an=aq[ao].split("=")[0];if(a.inArray(an,ap)==-1){ap.push(an)}}}return ap},hash:function(an){if(an!==L){this.value(Z.split("#")[0]+(an?"#"+an:""));return this}var am=Z.split("#");return am.slice(1,am.length).join("#")}}})();a.fn.address=function(c){var e;if(typeof c=="string"){e=c;c=undefined}if(!a(this).attr("address")){var d=function(g){if(g.shiftKey||g.ctrlKey||g.metaKey||g.which==2){return true}if(a(this).is("a")){g.preventDefault();var f=c?c.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:a.address.state()!==undefined&&!/^\/?$/.test(a.address.state())?a(this).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""):a(this).attr("href").replace(/^(#\!?|\.)/,"");a.address.value(f)}};a(e?e:this).on(b,d).on("submit",function(h){if(a(this).is("form")){h.preventDefault();var g=a(this).attr("action"),f=c?c.call(this):(g.indexOf("?")!=-1?g.replace(/&$/,""):g+"?")+a(this).serialize();a.address.value(f)}}).attr("address",true)}return this}})(jQuery);